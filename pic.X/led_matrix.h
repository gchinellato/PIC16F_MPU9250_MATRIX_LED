/* 
 * File:   led_matrix.h
 * Author: gchinellato
 *
 * Created on April 26, 2017, 1:12 AM
 */

#ifndef LED_MATRIX_H
#define	LED_MATRIX_H

#ifdef	__cplusplus
extern "C" {
#endif

#include "config.h"
    
// MAX7219 SPI LED Driver
#define LED_MATRIX_ROW 8
#define LED_MATRIX_COL 8
#define LED_MATRIX_MAX_COUNT 99
 
enum MAX7219_ADDR {
    NO_OP,
    DIGIT_0,
    DIGIT_1,
    DIGIT_2,
    DIGIT_3,
    DIGIT_4,
    DIGIT_5,
    DIGIT_6,
    DIGIT_7,
    DECODE_MODE,
    INTENSITY = 0x0A,
    SCAN_LIMIT,
    SHUTDOWN,
    DISPLAY_TEST = 0x0F,    
};  

char ledInit_Default[] = {
    0b11111111,
    0b11111111,
    0b11000011,
    0b11011011,
    0b11011011,
    0b11000011,
    0b11111111,
    0b11111111,
};

typedef struct
{
    char col[8];
}tableNumber;

const static tableNumber decimalTable[] = {
    {0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b00000000, 0b11100000}, //negative
    {0b00000000, 0b00000111, 0b00000101, 0b00000101, 0b00000101, 0b00000111, 0b00000000, 0b00000000}, //0
    {0b00000000, 0b00000001, 0b00000001, 0b00000001, 0b00000001, 0b00000001, 0b00000000, 0b00000000}, //1
    {0b00000000, 0b00000111, 0b00000001, 0b00000111, 0b00000100, 0b00000111, 0b00000000, 0b00000000}, //2
    {0b00000000, 0b00000111, 0b00000001, 0b00000111, 0b00000001, 0b00000111, 0b00000000, 0b00000000}, //3
    {0b00000000, 0b00000101, 0b00000101, 0b00000111, 0b00000001, 0b00000001, 0b00000000, 0b00000000}, //4
    {0b00000000, 0b00000111, 0b00000100, 0b00000111, 0b00000001, 0b00000111, 0b00000000, 0b00000000}, //5
    {0b00000000, 0b00000111, 0b00000100, 0b00000111, 0b00000101, 0b00000111, 0b00000000, 0b00000000}, //6
    {0b00000000, 0b00000111, 0b00000001, 0b00000001, 0b00000010, 0b00000100, 0b00000000, 0b00000000}, //7
    {0b00000000, 0b00000111, 0b00000101, 0b00000111, 0b00000101, 0b00000111, 0b00000000, 0b00000000}, //8
    {0b00000000, 0b00000111, 0b00000101, 0b00000111, 0b00000001, 0b00000001, 0b00000000, 0b00000000}, //9 
};
    
void LED_Matrix_Init(void);
void LED_Matrix_Clear_All(void);
void LED_Matrix_Set_All(void);
void LED_Matrix_Update(char x, char y);
void LED_Matrix_SetDigit(int number);

#ifdef	__cplusplus
}
#endif

#endif	/* LED_MATRIX_H */

